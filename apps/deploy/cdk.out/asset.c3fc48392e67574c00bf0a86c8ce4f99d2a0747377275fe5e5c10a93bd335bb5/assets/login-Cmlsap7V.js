import{p as o,w as l,a as p,x as d,v as x}from"./chunk-7TW6LJC6-DaDHYynL.js";import{q as f,i as h,o as g,s as w}from"./current-user-provider-CQskWHqO.js";import{u as j}from"./use-command-DCyiuDTW.js";import{u as y}from"./use-event-DuvDEQyU.js";import{u as P,T as b}from"./use-form-CHjNTqrC.js";import{P as v}from"./page-9TQxibTZ.js";import{P as C,B as E}from"./PasswordInput-BVpFYo-r.js";import{G as L}from"./Group-CX22UYal.js";import{T as c}from"./Text-BCB6W5jQ.js";import"./use-events-BzQNw1ET.js";import"./use-isomorphic-effect-BxLUwthI.js";import"./CloseButton-BtMh9jHH.js";import"./UnstyledButton-AqrG-hBD.js";import"./route-available-D-XKoVLa.js";import"./Loader-DjTkaKnY.js";import"./index-DZSsE0QN.js";import"./use-reduced-motion-COKNnHEg.js";var u={root:"m_849cf0da"};const N={underline:"hover"},i=f((r,t)=>{const{underline:a,className:n,unstyled:s,mod:m,...e}=h("Anchor",N,r);return o.jsx(c,{component:"a",ref:t,className:g({[u.root]:!s},n),...e,mod:[{underline:a},m],__staticSelector:"Anchor",unstyled:s})});i.classes=u;i.displayName="@mantine/core/Anchor";const S=()=>{const{user:r,reload:t}=p.useContext(w),{execute:a}=j("LoginCommand"),n=d(),s=P({initialValues:{username:"",password:""}});p.useEffect(()=>{(async()=>r&&await n("/"))()},[r]);const m=async e=>{await a({username:e.username,password:e.password})};return y("LoginSuccessfulEvent",()=>{t?.()}),o.jsx(v,{routeName:"login",children:o.jsxs("form",{method:"post",onSubmit:s.onSubmit(m),children:[o.jsx(b,{label:"Username",placeholder:"",...s.getInputProps("username")},s.key("username")),o.jsx(C,{label:"Password",placeholder:"",...s.getInputProps("password")},s.key("password")),o.jsx(L,{mt:"md",mb:"md",children:o.jsx(E,{type:"submit",children:"Login"})}),o.jsxs(c,{children:["Or you can"," ",o.jsx(i,{to:"/register",component:x,children:"register"})," ","a new account..."]})]})})},K=l(S);export{K as default};
